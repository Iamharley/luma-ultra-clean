const express = require("express"); const app = express(); const PORT = process.env.PORT || 3000; const envVars = { NODE_ENV: process.env.NODE_ENV, PORT: process.env.PORT, TWILIO_SID: process.env.TWILIO_ACCOUNT_SID ? "SET" : "MISSING", OPENAI_KEY: process.env.OPENAI_API_KEY ? "SET" : "MISSING", NOTION_KEY: process.env.NOTION_API_KEY ? "SET" : "MISSING" }; app.get("/health", (req, res) => { res.json({ status: "healthy", service: "LUMA Test Health Server", timestamp: new Date().toISOString(), port: PORT, env: envVars }); }); app.get("/", (req, res) => { res.send("ğŸ”¥ LUMA TEST HEALTH SERVER - OK"); }); app.get("/test-deps", (req, res) => { try { const twilio = require("twilio"); const axios = require("axios"); const { Client } = require("@notionhq/client"); res.json({ status: "success", message: "Toutes les dÃ©pendances sont installÃ©es", deps: ["twilio", "axios", "@notionhq/client"] }); } catch (error) { res.json({ status: "error", message: "Erreur dÃ©pendances", error: error.message }); } }); app.listen(PORT, "0.0.0.0", () => { console.log("ğŸš€ LUMA Test Health Server dÃ©marrÃ©"); console.log(`ğŸŒ Port: ${PORT}`); console.log("âœ… Health check: /health"); console.log("ğŸ§ª Test deps: /test-deps"); console.log("ğŸ” Variables:", envVars); });
